<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- This is an SEO Change -->
    <title>Personal Budget - Simple Finance Management</title>
    <!-- This is an SEO Change -->
    <meta name="description" content="Manage your personal budget, track expenses, and achieve financial goals with ease using our intuitive app.">
    <!-- This is an SEO Change -->
    <meta name="keywords" content="budget management, finance tracker, expense tracking, personal budget tool">
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <!-- This is an A11y Change -->
    <a href="#main" class="skip">Skip to main content</a>

    <!-- This is a Semantic HTML Change -->
    <header>
        <nav aria-label="Main Navigation">
            <ul>
                <li><a href="/">Homepage</a></li>
                <li><a href="/about.html">About</a></li>
                <li><a href="/login.html">Login</a></li>
                <li><a href="https://google.com" target="_blank" rel="noopener">Google</a></li>
            </ul>
        </nav>
    </header>

    <!-- This is a Semantic HTML Change -->
    <section class="hero" role="banner">
        <h1>Personal Budget</h1>
        <h2>Your Finance Partner</h2>
    </section>

    <!-- This is a Semantic HTML Change -->
    <main id="main" tabindex="-1">
        <section>
            <article>
                <h2>Stay on Track</h2>
                <p>
                    Do you know where you are spending your money? With proper budget tracking,
                    you can achieve financial stability.
                </p>
            </article>

            <article>
                <h2>Alerts</h2>
                <p>
                    Stay updated with alerts if you're about to exceed your set budget. Never
                    spend beyond your means.
                </p>
            </article>

            <article>
                <h2>Results</h2>
                <p>
                    Budgeting helps you get out of debt faster and live a guilt-free, happier life.
                    Spend with confidence!
                </p>
            </article>

            <article>
                <h2>Free</h2>
                <p>
                    Enjoy a free app where you are in full control of your data. Start budgeting today!
                </p>
            </article>
        </section>
        <!-- This is an A11y Change -->
        <section aria-labelledby="chart-title">
            <h2 id="chart-title">Budget Breakdown Chart</h2>
            <canvas id="myChart" width="400" height="400" aria-label="Budget data visualization" role="img"></canvas>
        </section>
    </main>

    <!-- This is an A11y Change -->
    <footer aria-label="Footer">
        <p>All rights reserved &copy; Personal Budget</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js" integrity="sha512-quHCp3WbBNkwLfYUMd+KwBAgpVukJu5MncuQaWXgCrfgcxCJAq/fo+oqrRKOj+UKEmyMCG3tb8RB63W+EmrOBg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" integrity="sha512-s+xg36jbIujB2S2VKfpGmlC3T5V2TF3lY48DX7u2r9XzGzgPsa6wTpOQA7J9iffvdeBN0q9tKzRxVxw1JviZPg==" crossorigin="anonymous"></script>

    <script>
        var dataSource = {
            datasets: [
                {
                    data: [],
                    backgroundColor: [
                        '#ffcd56',
                        '#ff6384',
                        '#36a2eb',
                        '#fd6b19',
                    ]
                }
            ],
            labels: []
        };

        function createChart() {
            var ctx = document.getElementById('myChart').getContext('2d');
            var myPieChart = new Chart(ctx, {
                type: 'pie',
                data: dataSource
            });
        }

        function getBudget() {
            axios.get('/budget')  // Use relative URL, let Nginx forward request
            .then(function (res) {
                dataSource.labels = res.data.myBudget.map(item => item.title);
                dataSource.datasets[0].data = res.data.myBudget.map(item => item.budget);
                createChart();
            })
            .catch(function (error) {
                console.error("Error fetching budget data:", error);
            });
        }

        getBudget();
    </script>
</body>
</html>
